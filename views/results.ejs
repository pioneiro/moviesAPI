<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

		<!-- Custom CSS -->
		<link rel="stylesheet" type="text/css" href="/results.css">
		
	<!-- Favicon Icons -->
	<link rel="apple-touch-icon" sizes="180x180" href="/icon-set/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/icon-set/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/icon-set/favicon-16x16.png">
	<link rel="manifest" href="/icon-set/site.webmanifest">

		<title>Results</title>
	</head>
	<body>

		<% var maxPage = Math.ceil(data.totalResults/10) %>
		<% var x = Math.floor(srcv.page/5)*5+(srcv.page<5?1:0) %>
		<% var y = (Math.floor(srcv.page/5)+1)*5 %>
		
		<div class="jumbotron jumbotron-fluid p-4">
		<h1 class="display-4 d-inline-block">Search Result</h1>
		</div>

		<div class="container mb-5">

			<h3 class="m-0 py-2">Page <%= srcv.page %> of <%= maxPage %></h3>

			<% data.Search.forEach(function(movie) { %>
				<div class="row mb-5">
					<div class="col-sm-12 col-md-4">
						<a href="/details?movieID=<%= movie.imdbID %>">
						<img id="poster" class="figure-img img-fluid img-thumbnail rounded" src="<%= movie.Poster %>">
						</a>
					</div>
					<div class="col-sm-12 col-md-8">
						<h1 class="display-4"><strong>Title</strong>: <%= movie.Title.toUpperCase() %></h1>
						<h2><strong>Year</strong>: <%= movie.Year %></h2>
						<h3><strong>Type</strong>: <%= movie.Type.toUpperCase() %></h3>
					</div>
				</div>
			<% }); %>

			<div class="d-flex pb-5">
				<div class="btn-group mx-auto" role="group" aria-label="First group">
					
					<% if(x >= 10) { %>
						<a href="/results?q=<%= srcv.q %>&type=<%= srcv.type %>&page=<%= x-1 %>">
							<button type="button" class="btn btn-outline-secondary"><</button>
						</a>	
					<% } %>
					<% for(var i = x; i < y && i <= maxPage; i++) { %>
						<a href="/results?q=<%= srcv.q %>&type=<%= srcv.type %>&page=<%= i %>">
							<button type="button" class="btn btn-outline-secondary <%= (i == srcv.page)?"active":"" %> "><%= i %></button>
						</a>
					<% } %>
					<% if(y <= maxPage) { %>
						<a href="/results?q=<%= srcv.q %>&type=<%= srcv.type %>&page=<%= y %>">
							<button type="button" class="btn btn-outline-secondary">></button>
						</a>
					<% } %>
			  </div>
			</div>

		</div>

		<div class="jumbotron jumbotron-fluid fixed-bottom m-0 p-2 text-center">
			<div class="container">
				<p class="lead m-0">Developed by <strong>Soumyajit Das</strong></p>
			</div>
		</div>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	</body>
</html>